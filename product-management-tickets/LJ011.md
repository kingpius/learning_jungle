## ğŸŸï¸ Product Ticket: LJ-011 â€” Hardening Pass (Low-Risk Robustness + UX)

---

### ğŸ“Œ Ticket ID

LJ-011

---

### ğŸ§‘â€ğŸ’¼ Ownership & Roles

* **Primary Owner (Full Stack Engineer):** Full Stack Engineer
* **Product Manager:** PM (scope control, acceptance)
* **Test Owner:** Test Engineer (regression + smoke)
* **Design Owner:** Optional (light QA only)

---

### ğŸ¯ Objective

Improve production robustness and baseline usability with **high-value, low-risk** changes only. No new product features and no redesign.

---

### ğŸ§© In Scope

1. **Operational health endpoint**
   - Add `GET /health/` returning `200 OK` with a minimal JSON payload.
   - Include a lightweight DB connectivity check (e.g., `SELECT 1`) and report `db_ok` boolean.

2. **Documentation robustness**
   - Extend `README.md` with concrete examples for Heroku env vars (names + example formats):
     - `ALLOWED_HOSTS` (include `<app>.herokuapp.com`)
     - `CSRF_TRUSTED_ORIGINS` (include `https://<app>.herokuapp.com`)
   - Add â€œcommon deploy failuresâ€ troubleshooting section (CSRF host mismatch, missing `SECRET_KEY`, AI misconfig).

3. **Post-login UX**
   - Redirect successful login/register to the child list (`/children/`) instead of `/` so the next action is obvious.

4. **User feedback messaging**
   - Add Django messages for child create/update/delete and reward chest creation (success + error states where applicable).

5. **Minimal regression tests**
   - Add a small test asserting homepage shows login/register links.
   - Add a test for `/health/` returning 200 and `db_ok` present.

---

### ğŸš« Out of Scope (Explicitly Excluded)

* New product features (timers, multiple attempts, dashboards)
* UI redesign or new design system components
* CI/CD pipelines or monitoring integrations
* Performance optimization beyond basic hygiene

---

### ğŸ§ª Acceptance Criteria

| Scenario | Expected Result |
| --- | --- |
| Health endpoint | `GET /health/` returns 200 with JSON including `status` and `db_ok` |
| Docs clarity | README includes example formats for `ALLOWED_HOSTS` and `CSRF_TRUSTED_ORIGINS` and troubleshooting notes |
| Login/register redirect | After auth, user lands on `/children/` |
| User feedback | CRUD actions show success messages |
| Tests | New tests pass; full suite remains green |

---

### ğŸ Definition of Done

* `/health/` implemented and documented
* README improvements merged
* Auth redirects updated
* Messages added to key flows
* Regression tests added and passing

---

### ğŸš¦ Priority

P1 â€” Postâ€‘compliance hardening

---

### ğŸ”„ Updates & Coordination Log

**Update YYYY-MM-DD â€” PM**
- (Add scope clarifications and sign-off here.)

**Update 2025-12-17 â€” Full Stack Engineer**
- Implemented `GET /health/` returning JSON with `status` and `db_ok` (DB connectivity check).
- Improved `README.md` with Heroku env var examples and a short troubleshooting section (CSRF/ALLOWED_HOSTS/SECRET_KEY/AI).
- Updated auth flows to redirect login/register to `/children/` for a clearer next step.
- Added global Django messages rendering (base layout) and success/info messages for child CRUD and treasure chest creation.
- Added minimal regression tests for homepage auth links and `/health/` response; suite remains green locally.
